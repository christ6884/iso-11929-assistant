import { Language } from './types.ts';

type Translations = {
  [key: string]: string;
};

const translations: { [key in Language | 'en' | 'fr' | 'de' | 'es']: Translations } = {
  fr: {
    // General
    cancel: 'Annuler',
    close: 'Fermer',
    save: 'Enregistrer',
    delete: 'Supprimer',
    load: 'Charger',
    edit: 'Modifier',
    submit: 'Soumettre',
    ok: 'OK',
    error: 'Erreur',
    loading: 'Chargement...',
    calculating: 'Calcul en cours...',

    // App.tsx & Header
    authorDetails: 'Développé par Christophe PHAM',
    proVersion: 'Version PRO',
    unlockPro: 'Débloquer PRO',
    unitConverter: 'Convertisseur d\'unités',
    unitConverterTitle: 'Convertisseur d\'Unités Radiologiques',
    identifyPeaks: 'Identifier les pics',
    toolsMenu: 'Outils',
    userGuide: 'Guide utilisateur',
    showWelcomeTooltip: 'Afficher l\'aide de bienvenue',
    isoCalculator: 'Calculateur ISO 11929',
    spectrometryTools: 'Outils de spectrométrie',
    sourceManagement: 'Gestion des sources',
    analysisHistory: 'Historique des analyses',
    lockedFeature: 'Fonctionnalité PRO',
    authorCredit: 'Développé par Christophe PHAM - Inspiré par LNHB-LVis',
    proUnlockedSuccess: 'Version Pro débloquée avec succès !',
    noActiveDetectors: 'Aucun détecteur actif sélectionné.',
    positiveSpeedError: 'La vitesse du convoyeur doit être positive.',
    updateAvailable: 'Une nouvelle version est disponible.',
    refresh: 'Actualiser',

    // Language & Theme
    changeLanguage: 'Changer de langue',
    changeTheme: 'Changer de thème',
    themeCyberCyan: 'Cyber Cyan (Défaut)',
    themeLabWhite: 'Labo Blanc',
    themeForestGreen: 'Forêt Verte',

    // Modes
    standard: 'Standard',
    spectrometry: 'Spectrométrie',
    surfaceControl: 'Contrôle Surfacique',
    chambre: 'Chambre',
    linge: 'Linge',
    standardTooltip: 'Mesures simples de comptage brut et de bruit de fond.',
    spectrometryTooltip: 'Utilise le nombre de coups dans une Région d\'Intérêt (ROI) d\'un spectre.',
    surfaceControlTooltip: 'Calcule la conformité par rapport à une activité surfacique cible.',
    chambreTooltip: 'Mode pour la mesure d\'objets dans une chambre de mesure (ex: C3 corps entier).',
    lingeTooltip: 'Mode pour le contrôle en continu du linge ou d\'autres objets sur un convoyeur.',

    // Input Panel
    inputs: 'Paramètres d\'entrée',
    expertMode: 'Mode expert',
    saveConfig: 'Sauvegarder',
    loadConfig: 'Charger',
    counts: 'coups',
    cps: 'c/s',
    cpm: 'c/min',
    c_02s: 'c/0.2s',

    calibration: 'Étalonnage',
    calibrationFactor: 'Facteur d\'étalonnage (w)',
    calibrationFactorTooltip: 'Facteur de conversion du taux de comptage net (c/s) en activité (Bq, Bq/cm², etc.). Unité : Bq/(c/s).',
    autoCalibFactor: 'Calculer w automatiquement',
    autoCalibFactorTooltip: 'Calcule automatiquement le facteur d\'étalonnage (w) en se basant sur l\'efficacité et la surface des détecteurs.',
    decayCalculator: 'Calculateur de décroissance',
    calibrationFactorUnit: 'Unité de w',
    calibrationFactorUnitTooltip: 'Unité du facteur d\'étalonnage. Ex: Bq/(c/s) ou (Bq/cm²)/(c/s).',
    relativeUncertainty: 'Incertitude relative (%)',
    relativeUncertaintyTooltip: 'Incertitude-type relative sur le facteur d\'étalonnage (u(w)/w * 100).',

    sourceMeasurement: 'Mesure de l\'échantillon',
    grossCount: 'Comptage brut',
    grossCountTooltip: 'Nombre de coups total mesuré pour l\'échantillon (source + bruit de fond).',
    measurementTime: 'Temps de mesure (s)',
    measurementTimeTooltip: 'Durée de la mesure de l\'échantillon.',
    backgroundTimeTooltip: 'Durée de la mesure du bruit de fond.',
    backgroundMeasurement: 'Mesure du bruit de fond',
    backgroundCount: 'Comptage du bruit de fond',
    backgroundCountTooltip: 'Nombre de coups mesuré pour le bruit de fond seul.',

    roiMeasurement: 'Mesure sur la Région d\'Intérêt (ROI)',
    roiGrossCount: 'Coups bruts dans la ROI',
    roiGrossCountTooltip: 'Nombre de coups total dans la ROI du spectre de l\'échantillon.',
    roiChannels: 'Nombre de canaux dans la ROI',
    roiChannelsTooltip: 'Largeur de la région d\'intérêt en nombre de canaux.',
    backgroundTotalCount: 'Coups totaux du spectre de fond',
    backgroundTotalCountTooltip: 'Nombre de coups total sur l\'ensemble du spectre de bruit de fond.',
    backgroundChannels: 'Nombre total de canaux du spectre',
    backgroundChannelsTooltip: 'Nombre total de canaux du détecteur (ex: 1024, 4096).',
    
    probeParameters: 'Paramètres de la sonde',
    probeEfficiency: 'Efficacité de la sonde (%)',
    probeEfficiencyTooltip: 'Efficacité de détection de la sonde (ex: 25% pour une sonde beta).',
    probeArea: 'Surface de la sonde (cm²)',
    probeAreaTooltip: 'Surface de détection de la sonde.',

    measurementConditions: 'Conditions de mesure',
    estimatedBackgroundRate: 'Taux de fond estimé (c/s)',
    estimatedBackgroundRateTooltip: 'Taux de comptage moyen du bruit de fond ambiant.',

    targetActivity: 'Activité Cible',
    targetValue: 'Valeur cible',
    targetValueTooltip: 'L\'activité (ou activité surfacique) cible à atteindre.',

    detectorSetup: 'Configuration des détecteurs',
    detector: 'Détecteur',
    enabled: 'Activé',
    detectorType: 'Type',
    efficiency: 'Efficacité',
    background: 'Bruit de fond',
    detectorDimLength: 'Longueur (cm)',
    detectorDimLengthTooltip: 'Dimension du détecteur dans le sens du mouvement du convoyeur.',
    detectorDimWidth: 'Largeur (cm)',
    detectorDimWidthTooltip: 'Dimension du détecteur perpendiculaire au mouvement du convoyeur.',

    conveyorSetup: 'Configuration du convoyeur',
    conveyorSpeed: 'Vitesse du convoyeur',
    conveyorSpeedTooltip: 'Vitesse de défilement des objets devant les détecteurs.',

    riskParameters: 'Paramètres de Risque',
    k1alphaTooltip: 'Quantile de la loi normale pour le risque de première espèce α (faux positif). Ex: 1.645 pour α=5%.',
    meanTimeBetweenFalseAlarms: 'Temps moyen entre fausses alarmes',
    k1betaTooltip: 'Quantile de la loi normale pour le risque de deuxième espèce β (faux négatif). Ex: 1.645 pour β=5%.',
    
    advancedParameters: 'Paramètres Avancés',
    correlationCoefficient: 'Coefficient de corrélation',
    correlationCoefficientTooltip: 'Corrélation entre l\'incertitude du bruit de fond et de l\'étalonnage (généralement 0).',
    bayesianCalculationMode: 'Mode de calcul bayésien',
    bayesianCalculationModeTooltip: 'Utilise une approche bayésienne pour calculer la probabilité de présence d\'un effet.',
    monteCarloMode: 'Mode Monte-Carlo',
    enableMonteCarlo: 'Activer Monte-Carlo',
    enableMonteCarloTooltip: 'Utilise des simulations de Monte-Carlo pour propager les incertitudes au lieu du calcul analytique.',
    numSimulations: 'Nombre de simulations',
    numSimulationsTooltip: 'Nombre d\'itérations pour la simulation Monte-Carlo. Plus le nombre est élevé, plus le résultat est précis.',

    // Results Panel
    results: 'Résultats',
    resultUnit: 'Unité',
    printReport: 'Imprimer le rapport',
    detectionLimitMode: 'Mode de calcul',
    calculate: 'Calculer y#',
    target: 'Cible y#',
    targetDetectionLimit: 'Limite de détection cible',
    targetDetectionLimitTooltip: 'Spécifiez une limite de détection que vous souhaitez atteindre. L\'assistant calculera le k(1-β) nécessaire.',
    primaryResult: 'Résultat net',
    primaryResultTooltip: "Résultat net (y) de la mesure et son incertitude-type composée u(y). L'incertitude est propagée selon la loi de propagation des incertitudes (GUM).\nFormule: y = w * (r_g - r_0)",
    mcPrimaryResultTooltip: 'La moyenne de la distribution de Monte-Carlo et son écart-type.',
    decisionThreshold: 'Seuil de décision (y*)',
    decisionThresholdTooltip: "Seuil de décision (valeur critique). Si le résultat y > y*, on conclut que l'activité est présente avec un risque de faux positif de α.\nFormule: y* = k(1-α) * u(y=0)\nAvec u(y=0), l'incertitude pour une activité nulle.",
    detectionLimit: 'Limite de détection (y#)',
    detectionLimitTooltip: "Limite de détection. C'est la plus petite activité vraie qui a une probabilité de (1-β) d'être détectée (c-à-d. de donner un résultat y > y*).\nFormule: y# = y* + k(1-β) * u(y#)",
    conclusion: 'Conclusion',
    effectPresent: 'Présence d\'un effet (Activité > Seuil de Décision)',
    effectNotPresent: 'Absence d\'un effet (Activité ≤ Seuil de Décision)',
    systemCompliant: 'Le système atteint la cible de détection.',
    systemNonCompliant: 'Le système N\'atteint PAS la cible de détection.',
    bestEstimate: 'Meilleure estimation',
    bestEstimateTooltip: "Meilleure estimation de l'activité. Si l'effet est détecté (y > y*), c'est égal au résultat net `y`. Sinon, la norme spécifie que l'on ne peut pas donner une valeur unique, mais un intervalle de confiance.",
    confidenceInterval: 'Intervalle de confiance (95%)',
    confidenceIntervalTooltip: "Intervalle de confiance à 95%. Si l'effet est détecté (y > y*), c'est l'intervalle dans lequel la valeur vraie a 95% de probabilité de se trouver.\nFormule: [max(0, y - 1.96*u(y)); y + 1.96*u(y)]",
    probabilityEffectPresent: 'Probabilité de présence d\'un effet',
    probabilityEffectPresentTooltip: 'Dans le mode bayésien, la probabilité que l\'activité mesurée soit réellement supérieure à zéro.',
    
    // Uncertainty Budget & Details
    uncertaintyBudget: 'Bilan d\'incertitude',
    uncertaintyBudgetTooltip: "Le bilan d'incertitude décompose la variance totale du résultat (u²(y)) en contributions de chaque paramètre d'entrée (comptage brut, bruit de fond, étalonnage).\n\nCela permet d'identifier quelle mesure a le plus d'impact sur l'incertitude finale. Une contribution élevée indique une source d'incertitude majeure à maîtriser pour améliorer la mesure.\n\nFormule (Loi de Propagation des Incertitudes):\nu²(y) ≈ Σ [ (∂y/∂xᵢ)² * u²(xᵢ) ] + Σ [ 2 * (∂y/∂xᵢ)(∂y/∂xⱼ) * u(xᵢ,xⱼ) ]\noù u²(xᵢ) est la variance d'une entrée et u(xᵢ,xⱼ) est la covariance.",
    budgetGross: 'Comptage brut',
    budgetBackground: 'Bruit de fond',
    budgetCalibration: 'Étalonnage',
    budgetCovariance: 'Covariance',
    budgetCalibrationTooltip: 'L\'incertitude d\'étalonnage n\'affecte la variance que si le résultat lui-même est non nul.',
    uncertaintyDetails: 'Détails de l\'incertitude',
    sensitivityCoefficients: 'Coefficients de sensibilité',
    sensitivityCoefficientsTooltip: "Un coefficient de sensibilité (cᵢ) mesure l'influence d'une petite variation d'un paramètre d'entrée (xᵢ) sur le résultat final (y). Il répond à la question : 'De combien change mon résultat si ce paramètre d'entrée change d'une unité ?'\n\nIls sont utilisés dans la loi de propagation des incertitudes pour pondérer la contribution de chaque variance d'entrée (u²(xᵢ)) à la variance totale (u²(y)).\n\nFormule (Dérivée Partielle):\ncᵢ = ∂y / ∂xᵢ",
    coeff_gross: 'Taux de comptage brut [c(r_g)]',
    coeff_gross_tooltip: "Indique la variation du résultat (y) pour une variation de +1 c/s du taux de comptage brut (r_g).\nFormule: ∂y/∂r_g = w",
    coeff_bkg: 'Taux de bruit de fond [c(r_0)]',
    coeff_bkg_tooltip: "Indique la variation du résultat (y) pour une variation de +1 c/s du taux de comptage de fond (r_0).\nFormule: ∂y/∂r_0 = -w",
    coeff_calib: 'Facteur d\'étalonnage [c(w)]',
    coeff_calib_tooltip: "Indique la variation du résultat (y) pour une variation de +1 unité du facteur d'étalonnage (w).\nFormule: ∂y/∂w = r_g - r_0",
    
    // Errors
    positiveValuesError: 'Les temps de mesure, le facteur d\'étalonnage et la limite de détection cible doivent être des valeurs positives.',
    negativeRateError: 'Les taux de comptage ne peuvent pas être négatifs.',
    kBetaError: 'k(1-β) est trop grand par rapport à l\'incertitude d\'étalonnage. La cible n\'est pas atteignable. Réduisez k(1-β) ou l\'incertitude.',
    targetNotReachable: 'La limite de détection cible n\'est pas atteignable avec les paramètres actuels.',
    analysisError: 'Erreur d\'analyse',
    analysisError_generic: 'Une erreur inconnue est survenue.',
    invalidImageFormat: 'Format d\'image invalide ou corrompu.',
    noTraceFound: 'Impossible de trouver la courbe du spectre dans l\'image. Assurez-vous que le contraste est suffisant.',
    curveExtractionFailed: 'Échec de l\'extraction de la courbe. Le tracé est peut-être trop discontinu ou bruité.',

    // Chart
    activity: 'Activité',
    chartTitle: 'Distribution des probabilités',
    h0_legend: 'H₀ (Activité = 0)',
    h1_legend: 'H₁ (Activité = y#)',
    measurement_distribution_legend: 'Distribution de la mesure',
    confidenceIntervalLegend: 'Intervalle de confiance (95%)',
    alpha_risk_legend: 'Risque α',
    beta_risk_legend: 'Risque β',
    chartDescription: 'Visualisation des distributions de probabilité selon la norme ISO 11929.',
    mc_distribution_legend: 'Distribution Monte-Carlo',
    measurement_legend: 'Mesure',
    mcChartDescription: 'Histogramme des résultats de {n} simulations de Monte-Carlo.',
    viewSimulationStats: 'Statistiques',
    viewSimulationStatsTooltip: 'Voir les statistiques détaillées de la simulation Monte-Carlo.',
    expandChartTooltip: 'Agrandir le graphique',
    
    // Welcome Modal
    welcomeTitle: 'Bienvenue dans l\'Assistant ISO 11929',
    welcomeIntro: 'Cet outil est conçu pour vous aider à réaliser des calculs de décision et de détection conformément à la norme ISO 11929.',
    welcomeFeature1Title: 'Modes de calcul multiples',
    welcomeFeature1Desc: 'Choisissez parmi les modes Standard, Spectrométrie, Surfacique et plus pour adapter les calculs à votre cas d\'usage.',
    welcomeFeature2Title: 'Mode Expert',
    welcomeFeature2Desc: 'Activez le mode expert pour accéder à des paramètres avancés comme le coefficient de corrélation et le mode Monte-Carlo.',
    welcomeFeature4Title: 'Outils de Spectrométrie',
    welcomeFeature4Desc: 'Analysez des spectres à partir d\'images ou de fichiers N42, calibrez en énergie et identifiez des pics.',
    welcomeFeature5Title: 'Gestion des sources',
    welcomeFeature5Desc: 'Tenez un inventaire de vos sources radioactives, avec calcul de décroissance et vérification de conformité.',
    welcomeFeature6Title: 'Multi-langues et thèmes',
    welcomeFeature6Desc: 'Personnalisez votre expérience avec plusieurs langues et thèmes visuels.',
    welcomeConclusion: 'Explorez les différents onglets et modes pour commencer.',
    welcomeStart: 'Commencer',

    // Pro Modal
    proAccessTitle: 'Accès aux fonctionnalités PRO',
    proAccessDescription: 'Veuillez entrer le code d\'accès pour débloquer les fonctionnalités avancées.',
    passcode: 'Code d\'accès',
    incorrectPasscode: 'Code d\'accès incorrect.',

    // Time format
    timeFormat: '{y}a {m}m {d}j {h}h',
  },
  en: {
    // General
    cancel: 'Cancel',
    close: 'Close',
    save: 'Save',
    delete: 'Delete',
    load: 'Load',
    edit: 'Edit',
    submit: 'Submit',
    ok: 'OK',
    error: 'Error',
    loading: 'Loading...',
    calculating: 'Calculating...',

    // App.tsx & Header
    authorDetails: 'Developed by Christophe PHAM',
    proVersion: 'PRO Version',
    unlockPro: 'Unlock PRO',
    unitConverter: 'Unit Converter',
    unitConverterTitle: 'Radiological Unit Converter',
    identifyPeaks: 'Identify Peaks',
    toolsMenu: 'Tools',
    userGuide: 'User Guide',
    showWelcomeTooltip: 'Show Welcome Screen',
    isoCalculator: 'ISO 11929 Calculator',
    spectrometryTools: 'Spectrometry Tools',
    sourceManagement: 'Source Management',
    analysisHistory: 'Analysis History',
    lockedFeature: 'PRO Feature',
    authorCredit: 'Developed by Christophe PHAM - Inspired by LNHB-LVis',
    proUnlockedSuccess: 'Pro version unlocked successfully!',
    noActiveDetectors: 'No active detectors selected.',
    positiveSpeedError: 'Conveyor speed must be positive.',
    updateAvailable: 'A new version is available.',
    refresh: 'Refresh',

    // Language & Theme
    changeLanguage: 'Change Language',
    changeTheme: 'Change Theme',
    themeCyberCyan: 'Cyber Cyan (Default)',
    themeLabWhite: 'Lab White',
    themeForestGreen: 'Forest Green',

    // Modes
    standard: 'Standard',
    spectrometry: 'Spectrometry',
    surfaceControl: 'Surface Control',
    chambre: 'Chamber',
    linge: 'Laundry',
    standardTooltip: 'Simple gross and background count measurements.',
    spectrometryTooltip: 'Uses counts within a Region of Interest (ROI) from a spectrum.',
    surfaceControlTooltip: 'Calculates compliance against a target surface activity.',
    chambreTooltip: 'Mode for measuring objects in a measurement chamber (e.g., whole-body counter).',
    lingeTooltip: 'Mode for continuous monitoring of laundry or other items on a conveyor.',

    // Input Panel
    inputs: 'Input Parameters',
    expertMode: 'Expert Mode',
    saveConfig: 'Save Config',
    loadConfig: 'Load Config',
    counts: 'counts',
    cps: 'c/s',
    cpm: 'c/min',
    c_02s: 'c/0.2s',

    calibration: 'Calibration',
    calibrationFactor: 'Calibration Factor (w)',
    calibrationFactorTooltip: 'Conversion factor from net count rate (c/s) to activity (Bq, Bq/cm², etc.). Unit: Bq/(c/s).',
    autoCalibFactor: 'Calculate w automatically',
    autoCalibFactorTooltip: 'Automatically calculates the calibration factor (w) based on detector efficiency and area.',
    decayCalculator: 'Decay Calculator',
    calibrationFactorUnit: 'Unit of w',
    calibrationFactorUnitTooltip: 'Unit of the calibration factor. E.g., Bq/(c/s) or (Bq/cm²)/(c/s).',
    relativeUncertainty: 'Relative Uncertainty (%)',
    relativeUncertaintyTooltip: 'Standard relative uncertainty on the calibration factor (u(w)/w * 100).',

    sourceMeasurement: 'Sample Measurement',
    grossCount: 'Gross Count',
    grossCountTooltip: 'Total counts measured for the sample (source + background).',
    measurementTime: 'Measurement Time (s)',
    measurementTimeTooltip: 'Duration of the sample measurement.',
    backgroundTimeTooltip: 'Duration of the background measurement.',
    backgroundMeasurement: 'Background Measurement',
    backgroundCount: 'Background Count',
    backgroundCountTooltip: 'Counts measured for the background alone.',

    roiMeasurement: 'Region of Interest (ROI) Measurement',
    roiGrossCount: 'Gross Counts in ROI',
    roiGrossCountTooltip: 'Total counts in the ROI of the sample spectrum.',
    roiChannels: 'Number of Channels in ROI',
    roiChannelsTooltip: 'Width of the region of interest in number of channels.',
    backgroundTotalCount: 'Total Background Spectrum Counts',
    backgroundTotalCountTooltip: 'Total counts over the entire background spectrum.',
    backgroundChannels: 'Total Spectrum Channels',
    backgroundChannelsTooltip: 'Total number of detector channels (e.g., 1024, 4096).',

    probeParameters: 'Probe Parameters',
    probeEfficiency: 'Probe Efficiency (%)',
    probeEfficiencyTooltip: 'Detection efficiency of the probe (e.g., 25% for a beta probe).',
    probeArea: 'Probe Area (cm²)',
    probeAreaTooltip: 'Detection area of the probe.',

    measurementConditions: 'Measurement Conditions',
    estimatedBackgroundRate: 'Estimated Background Rate (c/s)',
    estimatedBackgroundRateTooltip: 'Average count rate of the ambient background.',

    targetActivity: 'Target Activity',
    targetValue: 'Target Value',
    targetValueTooltip: 'The target activity (or surface activity) to be achieved.',
    
    detectorSetup: 'Detector Setup',
    detector: 'Detector',
    enabled: 'Enabled',
    detectorType: 'Type',
    efficiency: 'Efficiency',
    background: 'Background',
    detectorDimLength: 'Length (cm)',
    detectorDimLengthTooltip: 'Detector dimension in the direction of conveyor movement.',
    detectorDimWidth: 'Width (cm)',
    detectorDimWidthTooltip: 'Detector dimension perpendicular to conveyor movement.',

    conveyorSetup: 'Conveyor Setup',
    conveyorSpeed: 'Conveyor Speed',
    conveyorSpeedTooltip: 'Speed of objects moving past the detectors.',

    riskParameters: 'Risk Parameters',
    k1alphaTooltip: 'Quantile of the normal distribution for the type I error probability α (false positive). E.g., 1.645 for α=5%.',
    meanTimeBetweenFalseAlarms: 'Mean time between false alarms',
    k1betaTooltip: 'Quantile of the normal distribution for the type II error probability β (false negative). E.g., 1.645 for β=5%.',

    advancedParameters: 'Advanced Parameters',
    correlationCoefficient: 'Correlation Coefficient',
    correlationCoefficientTooltip: 'Correlation between background uncertainty and calibration uncertainty (usually 0).',
    bayesianCalculationMode: 'Bayesian Calculation Mode',
    bayesianCalculationModeTooltip: 'Uses a Bayesian approach to calculate the probability of an effect being present.',
    monteCarloMode: 'Monte Carlo Mode',
    enableMonteCarlo: 'Enable Monte Carlo',
    enableMonteCarloTooltip: 'Uses Monte Carlo simulations to propagate uncertainties instead of analytical calculation.',
    numSimulations: 'Number of Simulations',
    numSimulationsTooltip: 'Number of iterations for the Monte Carlo simulation. A higher number gives a more precise result.',

    // Results Panel
    results: 'Results',
    resultUnit: 'Unit',
    printReport: 'Print Report',
    detectionLimitMode: 'Calculation Mode',
    calculate: 'Calculate y#',
    target: 'Target y#',
    targetDetectionLimit: 'Target Detection Limit',
    targetDetectionLimitTooltip: 'Specify a detection limit you wish to achieve. The assistant will calculate the required k(1-β).',
    primaryResult: 'Net Result',
    primaryResultTooltip: "Net result (y) of the measurement and its combined standard uncertainty u(y). The uncertainty is propagated according to the Law of Propagation of Uncertainty (GUM).\nFormula: y = w * (r_g - r_0)",
    mcPrimaryResultTooltip: 'The mean of the Monte Carlo distribution and its standard deviation.',
    decisionThreshold: 'Decision Threshold (y*)',
    decisionThresholdTooltip: "Decision threshold (critical value). If the result y > y*, the presence of activity is concluded with a risk of false positive of α.\nFormula: y* = k(1-α) * u(y=0)\nWhere u(y=0) is the uncertainty for a null activity.",
    detectionLimit: 'Detection Limit (y#)',
    detectionLimitTooltip: "Detection limit. It is the smallest true activity that has a probability of (1-β) of being detected (i.e., giving a result y > y*).\nFormula: y# = y* + k(1-β) * u(y#)",
    conclusion: 'Conclusion',
    effectPresent: 'Presence of an effect (Activity > Decision Threshold)',
    effectNotPresent: 'Absence of an effect (Activity ≤ Decision Threshold)',
    systemCompliant: 'The system meets the detection target.',
    systemNonCompliant: 'The system does NOT meet the detection target.',
    bestEstimate: 'Best Estimate',
    bestEstimateTooltip: "Best estimate of the activity. If the effect is detected (y > y*), it is equal to the net result `y`. Otherwise, the standard specifies that a single value cannot be given, but a confidence interval.",
    confidenceInterval: 'Confidence Interval (95%)',
    confidenceIntervalTooltip: "95% confidence interval. If the effect is detected (y > y*), this is the interval in which the true value has a 95% probability of lying.\nFormula: [max(0, y - 1.96*u(y)); y + 1.96*u(y)]",
    probabilityEffectPresent: 'Probability of Effect Presence',
    probabilityEffectPresentTooltip: 'In Bayesian mode, the probability that the measured activity is truly greater than zero.',

    // Uncertainty Budget & Details
    uncertaintyBudget: 'Uncertainty Budget',
    uncertaintyBudgetTooltip: "The uncertainty budget breaks down the total variance of the result (u²(y)) into contributions from each input parameter (gross count, background, calibration).\n\nThis helps identify which measurement has the most impact on the final uncertainty. A high contribution indicates a major source of uncertainty to control in order to improve the measurement.\n\nFormula (Law of Propagation of Uncertainty):\nu²(y) ≈ Σ [ (∂y/∂xᵢ)² * u²(xᵢ) ] + Σ [ 2 * (∂y/∂xᵢ)(∂y/∂xⱼ) * u(xᵢ,xⱼ) ]\nwhere u²(xᵢ) is the variance of an input and u(xᵢ,xⱼ) is the covariance.",
    budgetGross: 'Gross Count',
    budgetBackground: 'Background',
    budgetCalibration: 'Calibration',
    budgetCovariance: 'Covariance',
    budgetCalibrationTooltip: 'The calibration uncertainty only affects the result\'s variance if the result itself is non-zero.',
    uncertaintyDetails: 'Uncertainty Details',
    sensitivityCoefficients: 'Sensitivity Coefficients',
    sensitivityCoefficientsTooltip: "A sensitivity coefficient (cᵢ) measures the influence of a small variation of an input parameter (xᵢ) on the final result (y). It answers the question: 'By how much does my result change if this input parameter changes by one unit?'\n\nThey are used in the law of propagation of uncertainty to weight the contribution of each input variance (u²(xᵢ)) to the total variance (u²(y)).\n\nFormula (Partial Derivative):\ncᵢ = ∂y / ∂xᵢ",
    coeff_gross: 'Gross Count Rate [c(r_g)]',
    coeff_gross_tooltip: "Indicates the change in the result (y) for a +1 c/s change in the gross count rate (r_g).\nFormula: ∂y/∂r_g = w",
    coeff_bkg: 'Background Rate [c(r_0)]',
    coeff_bkg_tooltip: "Indicates the change in the result (y) for a +1 c/s change in the background count rate (r_0).\nFormula: ∂y/∂r_0 = -w",
    coeff_calib: 'Calibration Factor [c(w)]',
    coeff_calib_tooltip: "Indicates the change in the result (y) for a +1 unit change in the calibration factor (w).\nFormula: ∂y/∂w = r_g - r_0",

    // Errors
    positiveValuesError: 'Measurement times, calibration factor, and target detection limit must be positive values.',
    negativeRateError: 'Count rates cannot be negative.',
    kBetaError: 'k(1-β) is too large relative to calibration uncertainty. Target is not reachable. Reduce k(1-β) or uncertainty.',
    targetNotReachable: 'Target detection limit is not reachable with the current parameters.',
    analysisError: 'Analysis Error',
    analysisError_generic: 'An unknown error occurred.',
    invalidImageFormat: 'Invalid or corrupt image format.',
    noTraceFound: 'Could not find the spectrum trace in the image. Ensure sufficient contrast.',
    curveExtractionFailed: 'Failed to extract curve. The trace may be too discontinuous or noisy.',

    // Chart
    activity: 'Activity',
    chartTitle: 'Probability Distributions',
    h0_legend: 'H₀ (Activity = 0)',
    h1_legend: 'H₁ (Activity = y#)',
    measurement_distribution_legend: 'Measurement Distribution',
    confidenceIntervalLegend: 'Confidence Interval (95%)',
    alpha_risk_legend: 'α Risk',
    beta_risk_legend: 'β Risk',
    chartDescription: 'Visualization of probability distributions according to ISO 11929.',
    mc_distribution_legend: 'Monte Carlo Distribution',
    measurement_legend: 'Measurement',
    mcChartDescription: 'Histogram of the results from {n} Monte Carlo simulations.',
    viewSimulationStats: 'Stats',
    viewSimulationStatsTooltip: 'View detailed statistics from the Monte Carlo simulation.',
    expandChartTooltip: 'Expand Chart',

    // Welcome Modal
    welcomeTitle: 'Welcome to the ISO 11929 Assistant',
    welcomeIntro: 'This tool is designed to help you perform decision and detection calculations in accordance with the ISO 11929 standard.',
    welcomeFeature1Title: 'Multiple Calculation Modes',
    welcomeFeature1Desc: 'Choose from Standard, Spectrometry, Surface Control, and more to tailor calculations to your use case.',
    welcomeFeature2Title: 'Expert Mode',
    welcomeFeature2Desc: 'Enable expert mode to access advanced settings like correlation coefficient and Monte Carlo mode.',
    welcomeFeature4Title: 'Spectrometry Tools',
    welcomeFeature4Desc: 'Analyze spectra from images or N42 files, perform energy calibration, and identify peaks.',
    welcomeFeature5Title: 'Source Management',
    welcomeFeature5Desc: 'Keep an inventory of your radioactive sources, with decay calculation and conformity checks.',
    welcomeFeature6Title: 'Multi-language & Themes',
    welcomeFeature6Desc: 'Customize your experience with multiple languages and visual themes.',
    welcomeConclusion: 'Explore the different tabs and modes to get started.',
    welcomeStart: 'Get Started',

    // Pro Modal
    proAccessTitle: 'Access PRO Features',
    proAccessDescription: 'Please enter the passcode to unlock advanced features.',
    passcode: 'Passcode',
    incorrectPasscode: 'Incorrect passcode.',

    // Time format
    timeFormat: '{y}y {m}m {d}d {h}h',
  },
  de: {
    // General
    cancel: 'Abbrechen',
    close: 'Schließen',
    save: 'Speichern',
    delete: 'Löschen',
    load: 'Laden',
    edit: 'Bearbeiten',
    submit: 'Senden',
    ok: 'OK',
    error: 'Fehler',
    loading: 'Wird geladen...',
    calculating: 'Berechnung läuft...',

    // App.tsx & Header
    authorDetails: 'Entwickelt von Christophe PHAM',
    proVersion: 'PRO-Version',
    unlockPro: 'PRO freischalten',
    unitConverter: 'Einheitenumrechner',
    unitConverterTitle: 'Radiologische Einheitenumrechner',
    identifyPeaks: 'Peaks identifizieren',
    toolsMenu: 'Werkzeuge',
    userGuide: 'Benutzerhandbuch',
    showWelcomeTooltip: 'Willkommensbildschirm anzeigen',
    isoCalculator: 'ISO 11929 Rechner',
    spectrometryTools: 'Spektrometrie-Werkzeuge',
    sourceManagement: 'Quellenverwaltung',
    analysisHistory: 'Analysehistorie',
    lockedFeature: 'PRO-Funktion',
    authorCredit: 'Entwickelt von Christophe PHAM - Inspiriert von LNHB-LVis',
    proUnlockedSuccess: 'Pro-Version erfolgreich freigeschaltet!',
    noActiveDetectors: 'Keine aktiven Detektoren ausgewählt.',
    positiveSpeedError: 'Die Förderbandgeschwindigkeit muss positiv sein.',
    updateAvailable: 'Eine neue Version ist verfügbar.',
    refresh: 'Aktualisieren',

    // Language & Theme
    changeLanguage: 'Sprache ändern',
    changeTheme: 'Thema ändern',
    themeCyberCyan: 'Cyber Cyan (Standard)',
    themeLabWhite: 'Labor-Weiß',
    themeForestGreen: 'Waldgrün',

    // Modes
    standard: 'Standard',
    spectrometry: 'Spektrometrie',
    surfaceControl: 'Oberflächenkontrolle',
    chambre: 'Kammer',
    linge: 'Wäsche',
    standardTooltip: 'Einfache Brutto- und Nulleffektmessungen.',
    spectrometryTooltip: 'Verwendet Zählungen innerhalb einer Region von Interesse (ROI) aus einem Spektrum.',
    surfaceControlTooltip: 'Berechnet die Konformität gegenüber einer Ziel-Oberflächenaktivität.',
    chambreTooltip: 'Modus zur Messung von Objekten in einer Messkammer (z.B. Ganzkörperzähler).',
    lingeTooltip: 'Modus zur kontinuierlichen Überwachung von Wäsche oder anderen Gegenständen auf einem Förderband.',

    // Input Panel
    inputs: 'Eingabeparameter',
    expertMode: 'Expertenmodus',
    saveConfig: 'Konfig. speichern',
    loadConfig: 'Konfig. laden',
    counts: 'counts',
    cps: 'c/s',
    cpm: 'c/min',
    c_02s: 'c/0.2s',

    calibration: 'Kalibrierung',
    calibrationFactor: 'Kalibrierfaktor (w)',
    calibrationFactorTooltip: 'Umrechnungsfaktor von der Nettozählrate (c/s) in Aktivität (Bq, Bq/cm² usw.). Einheit: Bq/(c/s).',
    autoCalibFactor: 'w automatisch berechnen',
    autoCalibFactorTooltip: 'Berechnet den Kalibrierfaktor (w) automatisch basierend auf Detektoreffizienz und -fläche.',
    decayCalculator: 'Zerfallsrechner',
    calibrationFactorUnit: 'Einheit von w',
    calibrationFactorUnitTooltip: 'Einheit des Kalibrierfaktors. Z.B. Bq/(c/s) oder (Bq/cm²)/(c/s).',
    relativeUncertainty: 'Relative Unsicherheit (%)',
    relativeUncertaintyTooltip: 'Relative Standardunsicherheit des Kalibrierfaktors (u(w)/w * 100).',

    sourceMeasurement: 'Probenmessung',
    grossCount: 'Bruttozählung',
    grossCountTooltip: 'Gesamtzahl der für die Probe gemessenen Zählungen (Quelle + Hintergrund).',
    measurementTime: 'Messzeit (s)',
    measurementTimeTooltip: 'Dauer der Probenmessung.',
    backgroundTimeTooltip: 'Dauer der Nulleffektmessung.',
    backgroundMeasurement: 'Nulleffektmessung',
    backgroundCount: 'Nulleffektzählung',
    backgroundCountTooltip: 'Zählungen, die nur für den Nulleffekt gemessen wurden.',

    roiMeasurement: 'Region-of-Interest (ROI) Messung',
    roiGrossCount: 'Bruttozählungen im ROI',
    roiGrossCountTooltip: 'Gesamtzahl der Zählungen im ROI des Probenspektrums.',
    roiChannels: 'Anzahl der Kanäle im ROI',
    roiChannelsTooltip: 'Breite der Region von Interesse in Anzahl der Kanäle.',
    backgroundTotalCount: 'Gesamtzählungen des Nulleffektspektrums',
    backgroundTotalCountTooltip: 'Gesamtzahl der Zählungen über das gesamte Nulleffektspektrum.',
    backgroundChannels: 'Gesamtanzahl der Spektrumkanäle',
    backgroundChannelsTooltip: 'Gesamtanzahl der Detektorkanäle (z. B. 1024, 4096).',

    probeParameters: 'Sondenparameter',
    probeEfficiency: 'Sondeneffizienz (%)',
    probeEfficiencyTooltip: 'Detektionseffizienz der Sonde (z. B. 25% für eine Betasonde).',
    probeArea: 'Sondenfläche (cm²)',
    probeAreaTooltip: 'Detektionsfläche der Sonde.',

    measurementConditions: 'Messbedingungen',
    estimatedBackgroundRate: 'Geschätzte Nulleffektzählrate (c/s)',
    estimatedBackgroundRateTooltip: 'Durchschnittliche Zählrate des Umgebungs-Nulleffekts.',

    targetActivity: 'Zielaktivität',
    targetValue: 'Zielwert',
    targetValueTooltip: 'Die zu erreichende Zielaktivität (oder Oberflächenaktivität).',
    
    detectorSetup: 'Detektorkonfiguration',
    detector: 'Detektor',
    enabled: 'Aktiviert',
    detectorType: 'Typ',
    efficiency: 'Effizienz',
    background: 'Nulleffekt',
    detectorDimLength: 'Länge (cm)',
    detectorDimLengthTooltip: 'Detektorabmessung in Bewegungsrichtung des Förderbandes.',
    detectorDimWidth: 'Breite (cm)',
    detectorDimWidthTooltip: 'Detektorabmessung senkrecht zur Bewegungsrichtung des Förderbandes.',

    conveyorSetup: 'Förderbandkonfiguration',
    conveyorSpeed: 'Förderbandgeschwindigkeit',
    conveyorSpeedTooltip: 'Geschwindigkeit der Objekte, die an den Detektoren vorbeifahren.',

    riskParameters: 'Risikoparameter',
    k1alphaTooltip: 'Quantil der Normalverteilung für die Wahrscheinlichkeit eines Fehlers 1. Art α (Fehlalarm). Z.B. 1.645 für α=5%.',
    meanTimeBetweenFalseAlarms: 'Mittlere Zeit zwischen Fehlalarmen',
    k1betaTooltip: 'Quantil der Normalverteilung für die Wahrscheinlichkeit eines Fehlers 2. Art β (Nichterkennung). Z.B. 1.645 für β=5%.',

    advancedParameters: 'Erweiterte Parameter',
    correlationCoefficient: 'Korrelationskoeffizient',
    correlationCoefficientTooltip: 'Korrelation zwischen Nulleffekt- und Kalibrierunsicherheit (normalerweise 0).',
    bayesianCalculationMode: 'Bayes-Berechnungsmodus',
    bayesianCalculationModeTooltip: 'Verwendet einen Bayes-Ansatz zur Berechnung der Wahrscheinlichkeit des Vorhandenseins eines Effekts.',
    monteCarloMode: 'Monte-Carlo-Modus',
    enableMonteCarlo: 'Monte-Carlo aktivieren',
    enableMonteCarloTooltip: 'Verwendet Monte-Carlo-Simulationen zur Fortpflanzung von Unsicherheiten anstelle der analytischen Berechnung.',
    numSimulations: 'Anzahl der Simulationen',
    numSimulationsTooltip: 'Anzahl der Iterationen für die Monte-Carlo-Simulation. Eine höhere Zahl ergibt ein genaueres Ergebnis.',

    // Results Panel
    results: 'Ergebnisse',
    resultUnit: 'Einheit',
    printReport: 'Bericht drucken',
    detectionLimitMode: 'Berechnungsmodus',
    calculate: 'y# berechnen',
    target: 'Ziel y#',
    targetDetectionLimit: 'Ziel-Nachweisgrenze',
    targetDetectionLimitTooltip: 'Geben Sie eine Nachweisgrenze an, die Sie erreichen möchten. Der Assistent berechnet das erforderliche k(1-β).',
    primaryResult: 'Nettoergebnis',
    primaryResultTooltip: "Nettoergebnis (y) der Messung und seine kombinierte Standardunsicherheit u(y). Die Unsicherheit wird gemäß dem Gesetz der Unsicherheitsfortpflanzung (GUM) fortgepflanzt.\nFormel: y = w * (r_g - r_0)",
    mcPrimaryResultTooltip: 'Der Mittelwert der Monte-Carlo-Verteilung und seine Standardabweichung.',
    decisionThreshold: 'Erkennungsgrenze (y*)',
    decisionThresholdTooltip: "Erkennungsgrenze (kritischer Wert). Wenn das Ergebnis y > y* ist, wird auf das Vorhandensein von Aktivität mit einem Fehlalarmrisiko von α geschlossen.\nFormel: y* = k(1-α) * u(y=0)\nWobei u(y=0) die Unsicherheit für eine Nullaktivität ist.",
    detectionLimit: 'Nachweisgrenze (y#)',
    detectionLimitTooltip: "Nachweisgrenze. Es ist die kleinste wahre Aktivität, die eine Wahrscheinlichkeit von (1-β) hat, nachgewiesen zu werden (d.h. ein Ergebnis y > y* zu liefern).\nFormel: y# = y* + k(1-β) * u(y#)",
    conclusion: 'Schlussfolgerung',
    effectPresent: 'Effekt vorhanden (Aktivität > Erkennungsgrenze)',
    effectNotPresent: 'Kein Effekt vorhanden (Aktivität ≤ Erkennungsgrenze)',
    systemCompliant: 'Das System erfüllt das Nachweisziel.',
    systemNonCompliant: 'Das System erfüllt das Nachweisziel NICHT.',
    bestEstimate: 'Bester Schätzwert',
    bestEstimateTooltip: "Bester Schätzwert der Aktivität. Wenn der Effekt nachgewiesen wird (y > y*), entspricht er dem Nettoergebnis `y`. Andernfalls gibt die Norm an, dass kein einzelner Wert, sondern ein Konfidenzintervall angegeben werden kann.",
    confidenceInterval: 'Konfidenzintervall (95%)',
    confidenceIntervalTooltip: "95% Konfidenzintervall. Wenn der Effekt nachgewiesen wird (y > y*), ist dies das Intervall, in dem der wahre Wert mit 95% Wahrscheinlichkeit liegt.\nFormel: [max(0, y - 1.96*u(y)); y + 1.96*u(y)]",
    probabilityEffectPresent: 'Wahrscheinlichkeit des Vorhandenseins eines Effekts',
    probabilityEffectPresentTooltip: 'Im Bayes-Modus die Wahrscheinlichkeit, dass die gemessene Aktivität wirklich größer als Null ist.',

    // Uncertainty Budget & Details
    uncertaintyBudget: 'Unsicherheitsbudget',
    uncertaintyBudgetTooltip: "Das Unsicherheitsbudget schlüsselt die Gesamtvarianz des Ergebnisses (u²(y)) in Beiträge der einzelnen Eingangsparameter (Bruttozählung, Nulleffekt, Kalibrierung) auf.\n\nDies hilft zu erkennen, welche Messung den größten Einfluss auf die finale Unsicherheit hat. Ein hoher Beitrag weist auf eine wesentliche Unsicherheitsquelle hin, die zur Verbesserung der Messung kontrolliert werden sollte.\n\nFormel (Fehlerfortpflanzungsgesetz):\nu²(y) ≈ Σ [ (∂y/∂xᵢ)² * u²(xᵢ) ] + Σ [ 2 * (∂y/∂xᵢ)(∂y/∂xⱼ) * u(xᵢ,xⱼ) ]\nwobei u²(xᵢ) die Varianz eines Eingangs und u(xᵢ,xⱼ) die Kovarianz ist.",
    budgetGross: 'Bruttozählung',
    budgetBackground: 'Nulleffekt',
    budgetCalibration: 'Kalibrierung',
    budgetCovariance: 'Kovarianz',
    budgetCalibrationTooltip: 'Die Kalibrierunsicherheit beeinflusst die Varianz des Ergebnisses nur, wenn das Ergebnis selbst nicht Null ist.',
    uncertaintyDetails: 'Unsicherheitsdetails',
    sensitivityCoefficients: 'Empfindlichkeitskoeffizienten',
    sensitivityCoefficientsTooltip: "Ein Empfindlichkeitskoeffizient (cᵢ) misst den Einfluss einer kleinen Änderung eines Eingangsparameters (xᵢ) auf das Endergebnis (y). Er beantwortet die Frage: 'Um wie viel ändert sich mein Ergebnis, wenn sich dieser Eingangsparameter um eine Einheit ändert?'\n\nSie werden im Fehlerfortpflanzungsgesetz verwendet, um den Beitrag jeder Eingangsvarianz (u²(xᵢ)) zur Gesamtvarianz (u²(y)) zu gewichten.\n\nFormel (Partielle Ableitung):\ncᵢ = ∂y / ∂xᵢ",
    coeff_gross: 'Bruttozählrate [c(r_g)]',
    coeff_gross_tooltip: "Gibt die Änderung des Ergebnisses (y) bei einer Änderung der Bruttozählrate (r_g) um +1 c/s an.\nFormel: ∂y/∂r_g = w",
    coeff_bkg: 'Nulleffektzählrate [c(r_0)]',
    coeff_bkg_tooltip: "Gibt die Änderung des Ergebnisses (y) bei einer Änderung der Nulleffektzählrate (r_0) um +1 c/s an.\nFormel: ∂y/∂r_0 = -w",
    coeff_calib: 'Kalibrierfaktor [c(w)]',
    coeff_calib_tooltip: "Gibt die Änderung des Ergebnisses (y) bei einer Änderung des Kalibrierfaktors (w) um +1 Einheit an.\nFormel: ∂y/∂w = r_g - r_0",
    
    // Errors
    positiveValuesError: 'Messzeiten, Kalibrierfaktor und Ziel-Nachweisgrenze müssen positive Werte sein.',
    negativeRateError: 'Zählraten können nicht negativ sein.',
    kBetaError: 'k(1-β) ist im Verhältnis zur Kalibrierunsicherheit zu groß. Ziel nicht erreichbar. Reduzieren Sie k(1-β) oder die Unsicherheit.',
    targetNotReachable: 'Die Ziel-Nachweisgrenze ist mit den aktuellen Parametern nicht erreichbar.',
    analysisError: 'Analysefehler',
    analysisError_generic: 'Ein unbekannter Fehler ist aufgetreten.',
    invalidImageFormat: 'Ungültiges oder beschädigtes Bildformat.',
    noTraceFound: 'Die Spektrumkurve konnte im Bild nicht gefunden werden. Stellen Sie sicher, dass der Kontrast ausreichend ist.',
    curveExtractionFailed: 'Extraktion der Kurve fehlgeschlagen. Die Kurve ist möglicherweise zu unterbrochen oder verrauscht.',

    // Chart
    activity: 'Aktivität',
    chartTitle: 'Wahrscheinlichkeitsverteilungen',
    h0_legend: 'H₀ (Aktivität = 0)',
    h1_legend: 'H₁ (Aktivität = y#)',
    measurement_distribution_legend: 'Messverteilung',
    confidenceIntervalLegend: 'Konfidenzintervall (95%)',
    alpha_risk_legend: 'α-Risiko',
    beta_risk_legend: 'β-Risiko',
    chartDescription: 'Visualisierung von Wahrscheinlichkeitsverteilungen gemäß ISO 11929.',
    mc_distribution_legend: 'Monte-Carlo-Verteilung',
    measurement_legend: 'Messung',
    mcChartDescription: 'Histogramm der Ergebnisse von {n} Monte-Carlo-Simulationen.',
    viewSimulationStats: 'Statistiken',
    viewSimulationStatsTooltip: 'Detaillierte Statistiken der Monte-Carlo-Simulation anzeigen.',
    expandChartTooltip: 'Diagramm vergrößern',
    
    // Welcome Modal
    welcomeTitle: 'Willkommen beim ISO 11929 Assistenten',
    welcomeIntro: 'Dieses Werkzeug soll Ihnen helfen, Entscheidungs- und Nachweisberechnungen gemäß der Norm ISO 11929 durchzuführen.',
    welcomeFeature1Title: 'Mehrere Berechnungsmodi',
    welcomeFeature1Desc: 'Wählen Sie zwischen Standard, Spektrometrie, Oberflächenkontrolle und mehr, um die Berechnungen an Ihren Anwendungsfall anzupassen.',
    welcomeFeature2Title: 'Expertenmodus',
    welcomeFeature2Desc: 'Aktivieren Sie den Expertenmodus, um auf erweiterte Einstellungen wie den Korrelationskoeffizienten und den Monte-Carlo-Modus zuzugreifen.',
    welcomeFeature4Title: 'Spektrometrie-Werkzeuge',
    welcomeFeature4Desc: 'Analysieren Sie Spektren aus Bildern oder N42-Dateien, führen Sie eine Energiekalibrierung durch und identifizieren Sie Peaks.',
    welcomeFeature5Title: 'Quellenverwaltung',
    welcomeFeature5Desc: 'Führen Sie ein Inventar Ihrer radioaktiven Quellen mit Zerfallsberechnung und Konformitätsprüfungen.',
    welcomeFeature6Title: 'Mehrsprachigkeit & Themen',
    welcomeFeature6Desc: 'Passen Sie Ihre Erfahrung mit mehreren Sprachen und visuellen Themen an.',
    welcomeConclusion: 'Erkunden Sie die verschiedenen Registerkarten und Modi, um zu beginnen.',
    welcomeStart: 'Los geht\'s',

    // Pro Modal
    proAccessTitle: 'Zugriff auf PRO-Funktionen',
    proAccessDescription: 'Bitte geben Sie den Passcode ein, um erweiterte Funktionen freizuschalten.',
    passcode: 'Passcode',
    incorrectPasscode: 'Falscher Passcode.',

    // Time format
    timeFormat: '{y}J {m}M {d}T {h}Std',
  },
  es: {
    // General
    cancel: 'Cancelar',
    close: 'Cerrar',
    save: 'Guardar',
    delete: 'Eliminar',
    load: 'Cargar',
    edit: 'Editar',
    submit: 'Enviar',
    ok: 'OK',
    error: 'Error',
    loading: 'Cargando...',
    calculating: 'Calculando...',

    // App.tsx & Header
    authorDetails: 'Desarrollado por Christophe PHAM',
    proVersion: 'Versión PRO',
    unlockPro: 'Desbloquear PRO',
    unitConverter: 'Convertidor de Unidades',
    unitConverterTitle: 'Convertidor de Unidades Radiológicas',
    identifyPeaks: 'Identificar Picos',
    toolsMenu: 'Herramientas',
    userGuide: 'Guía de Usuario',
    showWelcomeTooltip: 'Mostrar Pantalla de Bienvenida',
    isoCalculator: 'Calculadora ISO 11929',
    spectrometryTools: 'Herramientas de Espectrometría',
    sourceManagement: 'Gestión de Fuentes',
    analysisHistory: 'Historial de Análisis',
    lockedFeature: 'Función PRO',
    authorCredit: 'Desarrollado por Christophe PHAM - Inspirado por LNHB-LVis',
    proUnlockedSuccess: '¡Versión Pro desbloqueada con éxito!',
    noActiveDetectors: 'No hay detectores activos seleccionados.',
    positiveSpeedError: 'La velocidad de la cinta transportadora debe ser positiva.',
    updateAvailable: 'Hay una nueva versión disponible.',
    refresh: 'Actualizar',

    // Language & Theme
    changeLanguage: 'Cambiar Idioma',
    changeTheme: 'Cambiar Tema',
    themeCyberCyan: 'Cyber Cyan (Predeterminado)',
    themeLabWhite: 'Laboratorio Blanco',
    themeForestGreen: 'Verde Bosque',

    // Modes
    standard: 'Estándar',
    spectrometry: 'Espectrometría',
    surfaceControl: 'Control de Superficie',
    chambre: 'Cámara',
    linge: 'Lavandería',
    standardTooltip: 'Mediciones simples de recuento bruto y de fondo.',
    spectrometryTooltip: 'Utiliza recuentos dentro de una Región de Interés (ROI) de un espectro.',
    surfaceControlTooltip: 'Calcula la conformidad con una actividad superficial objetivo.',
    chambreTooltip: 'Modo para medir objetos en una cámara de medición (p. ej., contador de cuerpo entero).',
    lingeTooltip: 'Modo para el monitoreo continuo de lavandería u otros artículos en una cinta transportadora.',

    // Input Panel
    inputs: 'Parámetros de Entrada',
    expertMode: 'Modo Experto',
    saveConfig: 'Guardar Config.',
    loadConfig: 'Cargar Config.',
    counts: 'cuentas',
    cps: 'c/s',
    cpm: 'c/min',
    c_02s: 'c/0.2s',

    calibration: 'Calibración',
    calibrationFactor: 'Factor de Calibración (w)',
    calibrationFactorTooltip: 'Factor de conversión de la tasa de recuento neta (c/s) a actividad (Bq, Bq/cm², etc.). Unidad: Bq/(c/s).',
    autoCalibFactor: 'Calcular w automáticamente',
    autoCalibFactorTooltip: 'Calcula automáticamente el factor de calibración (w) basándose en la eficiencia y el área del detector.',
    decayCalculator: 'Calculadora de Decaimiento',
    calibrationFactorUnit: 'Unidad de w',
    calibrationFactorUnitTooltip: 'Unidad del factor de calibración. Ej: Bq/(c/s) o (Bq/cm²)/(c/s).',
    relativeUncertainty: 'Incertidumbre Relativa (%)',
    relativeUncertaintyTooltip: 'Incertidumbre estándar relativa del factor de calibración (u(w)/w * 100).',

    sourceMeasurement: 'Medición de la Muestra',
    grossCount: 'Recuento Bruto',
    grossCountTooltip: 'Recuentos totales medidos para la muestra (fuente + fondo).',
    measurementTime: 'Tiempo de Medición (s)',
    measurementTimeTooltip: 'Duración de la medición de la muestra.',
    backgroundTimeTooltip: 'Duración de la medición del fondo.',
    backgroundMeasurement: 'Medición del Fondo',
    backgroundCount: 'Recuento de Fondo',
    backgroundCountTooltip: 'Recuentos medidos solo para el fondo.',

    roiMeasurement: 'Medición de Región de Interés (ROI)',
    roiGrossCount: 'Cuentas Brutas en ROI',
    roiGrossCountTooltip: 'Cuentas totales en la ROI del espectro de la muestra.',
    roiChannels: 'Número de Canales en ROI',
    roiChannelsTooltip: 'Ancho de la región de interés en número de canales.',
    backgroundTotalCount: 'Cuentas Totales del Espectro de Fondo',
    backgroundTotalCountTooltip: 'Cuentas totales en todo el espectro de fondo.',
    backgroundChannels: 'Canales Totales del Espectro',
    backgroundChannelsTooltip: 'Número total de canales del detector (p. ej., 1024, 4096).',

    probeParameters: 'Parámetros de la Sonda',
    probeEfficiency: 'Eficiencia de la Sonda (%)',
    probeEfficiencyTooltip: 'Eficiencia de detección de la sonda (p. ej., 25% para una sonda beta).',
    probeArea: 'Área de la Sonda (cm²)',
    probeAreaTooltip: 'Área de detección de la sonda.',

    measurementConditions: 'Condiciones de Medición',
    estimatedBackgroundRate: 'Tasa de Fondo Estimada (c/s)',
    estimatedBackgroundRateTooltip: 'Tasa de recuento promedio del fondo ambiental.',

    targetActivity: 'Actividad Objetivo',
    targetValue: 'Valor Objetivo',
    targetValueTooltip: 'La actividad (o actividad superficial) objetivo a alcanzar.',
    
    detectorSetup: 'Configuración del Detector',
    detector: 'Detector',
    enabled: 'Activado',
    detectorType: 'Tipo',
    efficiency: 'Eficiencia',
    background: 'Fondo',
    detectorDimLength: 'Longitud (cm)',
    detectorDimLengthTooltip: 'Dimensión del detector en la dirección del movimiento de la cinta.',
    detectorDimWidth: 'Ancho (cm)',
    detectorDimWidthTooltip: 'Dimensión del detector perpendicular al movimiento de la cinta.',

    conveyorSetup: 'Configuración de la Cinta',
    conveyorSpeed: 'Velocidad de la Cinta',
    conveyorSpeedTooltip: 'Velocidad de los objetos que pasan por los detectores.',

    riskParameters: 'Parámetros de Riesgo',
    k1alphaTooltip: 'Cuantil de la distribución normal para la probabilidad de error tipo I α (falso positivo). Ej: 1.645 para α=5%.',
    meanTimeBetweenFalseAlarms: 'Tiempo medio entre falsas alarmas',
    k1betaTooltip: 'Cuantil de la distribución normal para la probabilidad de error tipo II β (falso negativo). Ej: 1.645 para β=5%.',

    advancedParameters: 'Parámetros Avanzados',
    correlationCoefficient: 'Coeficiente de Correlación',
    correlationCoefficientTooltip: 'Correlación entre la incertidumbre del fondo y la de la calibración (generalmente 0).',
    bayesianCalculationMode: 'Modo de Cálculo Bayesiano',
    bayesianCalculationModeTooltip: 'Usa un enfoque bayesiano para calcular la probabilidad de presencia de un efecto.',
    monteCarloMode: 'Modo Monte Carlo',
    enableMonteCarlo: 'Activar Monte Carlo',
    enableMonteCarloTooltip: 'Usa simulaciones de Monte Carlo para propagar incertidumbres en lugar del cálculo analítico.',
    numSimulations: 'Número de Simulaciones',
    numSimulationsTooltip: 'Número de iteraciones para la simulación de Monte Carlo. Un número mayor da un resultado más preciso.',

    // Results Panel
    results: 'Resultados',
    resultUnit: 'Unidad',
    printReport: 'Imprimir Informe',
    detectionLimitMode: 'Modo de Cálculo',
    calculate: 'Calcular y#',
    target: 'Objetivo y#',
    targetDetectionLimit: 'Límite de Detección Objetivo',
    targetDetectionLimitTooltip: 'Especifique un límite de detección que desee alcanzar. El asistente calculará el k(1-β) necesario.',
    primaryResult: 'Resultado Neto',
    primaryResultTooltip: "Resultado neto (y) de la medición y su incertidumbre estándar combinada u(y). La incertidumbre se propaga según la Ley de Propagación de Incertidumbre (GUM).\nFórmula: y = w * (r_g - r_0)",
    mcPrimaryResultTooltip: 'La media de la distribución de Monte Carlo y su desviación estándar.',
    decisionThreshold: 'Umbral de Decisión (y*)',
    decisionThresholdTooltip: "Umbral de decisión (valor crítico). Si el resultado y > y*, se concluye la presencia de actividad con un riesgo de falso positivo de α.\nFórmula: y* = k(1-α) * u(y=0)\nDonde u(y=0) es la incertidumbre para una actividad nula.",
    detectionLimit: 'Límite de Detección (y#)',
    detectionLimitTooltip: "Límite de detección. Es la actividad verdadera más pequeña que tiene una probabilidad de (1-β) de ser detectada (es decir, dar un resultado y > y*).\nFórmula: y# = y* + k(1-β) * u(y#)",
    conclusion: 'Conclusión',
    effectPresent: 'Presencia de un efecto (Actividad > Umbral de Decisión)',
    effectNotPresent: 'Ausencia de un efecto (Actividad ≤ Umbral de Decisión)',
    systemCompliant: 'El sistema cumple el objetivo de detección.',
    systemNonCompliant: 'El sistema NO cumple el objetivo de detección.',
    bestEstimate: 'Mejor Estimación',
    bestEstimateTooltip: "Mejor estimación de la actividad. Si se detecta el efecto (y > y*), es igual al resultado neto `y`. De lo contrario, la norma especifica que no se puede dar un valor único, sino un intervalo de confianza.",
    confidenceInterval: 'Intervalo de Confianza (95%)',
    confidenceIntervalTooltip: "Intervalo de confianza del 95%. Si se detecta el efecto (y > y*), este es el intervalo en el que el valor verdadero tiene un 95% de probabilidad de encontrarse.\nFórmula: [max(0, y - 1.96*u(y)); y + 1.96*u(y)]",
    probabilityEffectPresent: 'Probabilidad de Presencia de Efecto',
    probabilityEffectPresentTooltip: 'En modo bayesiano, la probabilidad de que la actividad medida sea realmente mayor que cero.',

    // Uncertainty Budget & Details
    uncertaintyBudget: 'Presupuesto de Incertidumbre',
    uncertaintyBudgetTooltip: "El presupuesto de incertidumbre desglosa la varianza total del resultado (u²(y)) en contribuciones de cada parámetro de entrada (recuento bruto, fondo, calibración).\n\nEsto ayuda a identificar qué medición tiene el mayor impacto en la incertidumbre final. una contribución alta indica una fuente importante de incertidumbre que debe controlarse para mejorar la medición.\n\nFórmula (Ley de Propagación de Incertidumbre):\nu²(y) ≈ Σ [ (∂y/∂xᵢ)² * u²(xᵢ) ] + Σ [ 2 * (∂y/∂xᵢ)(∂y/∂xⱼ) * u(xᵢ,xⱼ) ]\ndonde u²(xᵢ) es la varianza de una entrada y u(xᵢ,xⱼ) es la covarianza.",
    budgetGross: 'Recuento Bruto',
    budgetBackground: 'Fondo',
    budgetCalibration: 'Calibración',
    budgetCovariance: 'Covarianza',
    budgetCalibrationTooltip: 'La incertidumbre de la calibración solo afecta la varianza del resultado si el resultado mismo es distinto de cero.',
    uncertaintyDetails: 'Detalles de Incertidumbre',
    sensitivityCoefficients: 'Coeficientes de Sensibilidad',
    sensitivityCoefficientsTooltip: "Un coeficiente de sensibilidad (cᵢ) mide la influencia de una pequeña variación de un parámetro de entrada (xᵢ) en el resultado final (y). Responde a la pregunta: '¿Cuánto cambia mi resultado si este parámetro de entrada cambia en una unidad?'\n\nSe utilizan en la ley de propagación de incertidumbre para ponderar la contribución de cada varianza de entrada (u²(xᵢ)) a la varianza total (u²(y)).\n\nFórmula (Derivada Parcial):\ncᵢ = ∂y / ∂xᵢ",
    coeff_gross: 'Tasa de Recuento Bruto [c(r_g)]',
    coeff_gross_tooltip: "Indica el cambio en el resultado (y) por un cambio de +1 c/s en la tasa de recuento bruto (r_g).\nFórmula: ∂y/∂r_g = w",
    coeff_bkg: 'Tasa de Fondo [c(r_0)]',
    coeff_bkg_tooltip: "Indica el cambio en el resultado (y) por un cambio de +1 c/s en la tasa de recuento de fondo (r_0).\nFórmula: ∂y/∂r_0 = -w",
    coeff_calib: 'Factor de Calibración [c(w)]',
    coeff_calib_tooltip: "Indica el cambio en el resultado (y) por un cambio de +1 unidad en el factor de calibración (w).\nFórmula: ∂y/∂w = r_g - r_0",

    // Errors
    positiveValuesError: 'Los tiempos de medición, el factor de calibración y el límite de detección objetivo deben ser valores positivos.',
    negativeRateError: 'Las tasas de recuento no pueden ser negativas.',
    kBetaError: 'k(1-β) es demasiado grande en relación con la incertidumbre de calibración. El objetivo no es alcanzable. Reduzca k(1-β) o la incertidumbre.',
    targetNotReachable: 'El límite de detección objetivo no es alcanzable con los parámetros actuales.',
    analysisError: 'Error de Análisis',
    analysisError_generic: 'Ocurrió un error desconocido.',
    invalidImageFormat: 'Formato de imagen inválido o corrupto.',
    noTraceFound: 'No se pudo encontrar la traza del espectro en la imagen. Asegúrese de que haya suficiente contraste.',
    curveExtractionFailed: 'No se pudo extraer la curva. La traza puede ser demasiado discontinua o ruidosa.',

    // Chart
    activity: 'Actividad',
    chartTitle: 'Distribuciones de Probabilidad',
    h0_legend: 'H₀ (Actividad = 0)',
    h1_legend: 'H₁ (Actividad = y#)',
    measurement_distribution_legend: 'Distribución de la Medición',
    confidenceIntervalLegend: 'Intervalo de Confianza (95%)',
    alpha_risk_legend: 'Riesgo α',
    beta_risk_legend: 'Riesgo β',
    chartDescription: 'Visualización de las distribuciones de probabilidad según la norma ISO 11929.',
    mc_distribution_legend: 'Distribución de Monte Carlo',
    measurement_legend: 'Medición',
    mcChartDescription: 'Histograma de los resultados de {n} simulaciones de Monte Carlo.',
    viewSimulationStats: 'Estadísticas',
    viewSimulationStatsTooltip: 'Ver estadísticas detalladas de la simulación de Monte Carlo.',
    expandChartTooltip: 'Expandir Gráfico',

    // Welcome Modal
    welcomeTitle: 'Bienvenido al Asistente ISO 11929',
    welcomeIntro: 'Esta herramienta está diseñada para ayudarle a realizar cálculos de decisión y detección de acuerdo con la norma ISO 11929.',
    welcomeFeature1Title: 'Múltiples Modos de Cálculo',
    welcomeFeature1Desc: 'Elija entre Estándar, Espectrometría, Control de Superficie y más para adaptar los cálculos a su caso de uso.',
    welcomeFeature2Title: 'Modo Experto',
    welcomeFeature2Desc: 'Active el modo experto para acceder a configuraciones avanzadas como el coeficiente de correlación y el modo Monte Carlo.',
    welcomeFeature4Title: 'Herramientas de Espectrometría',
    welcomeFeature4Desc: 'Analice espectros de imágenes o archivos N42, realice calibraciones de energía e identifique picos.',
    welcomeFeature5Title: 'Gestión de Fuentes',
    welcomeFeature5Desc: 'Mantenga un inventario de sus fuentes radiactivas, con cálculo de decaimiento y comprobaciones de conformidad.',
    welcomeFeature6Title: 'Multi-idioma y Temas',
    welcomeFeature6Desc: 'Personalice su experiencia con múltiples idiomas y temas visuales.',
    welcomeConclusion: 'Explore las diferentes pestañas y modos para empezar.',
    welcomeStart: 'Comenzar',

    // Pro Modal
    proAccessTitle: 'Acceder a Funciones PRO',
    proAccessDescription: 'Por favor, introduzca el código de acceso para desbloquear las funciones avanzadas.',
    passcode: 'Código de acceso',
    incorrectPasscode: 'Código de acceso incorrecto.',
    
    // Time format
    timeFormat: '{y}a {m}m {d}d {h}h',
  },
};

export const getTranslator = (lang: Language) => {
  const langTranslations = translations[lang] || translations.en;
  const fallbackTranslations = translations.en;
  
  return (key: string): string => {
    return (langTranslations as any)[key] || (fallbackTranslations as any)[key] || key;
  };
};